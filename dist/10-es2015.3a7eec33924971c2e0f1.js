(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"9RqB":function(l,n,u){"use strict";u.r(n);var t=u("8Y7J");class e{}var a=u("pMnS"),i=u("SVse");class r{}var s=u("AytR");class o{constructor(l){this.http=l,this.title="app",this.records=[]}getCSVData(l){this.http.get(`${s.a.apiURL}/home/getData`,{responseType:"blob"}).subscribe(n=>{let u=n,t=new FileReader;t.readAsText(u),t.onload=(()=>{let n=t.result.split(/\r\n|\n/),u=this.getHeaderArray(n);this.records=this.getDataRecordsArrayFromCSVFile(n,u.length),l(this.records)}),t.onerror=function(){console.log("error is occured while reading file!")}})}getDataRecordsArrayFromCSVFile(l,n){return l.map((l,n)=>{l=l.split("\t");let u=new r;return u.code=null!=l[1]?l[1].trim():"",u.lat=null!=l[27]?this.ParseDMS(l[27].trim()):"",u.long=null!=l[28]?this.ParseDMS(l[28].trim()):"",u.elevation=null!=l[30]?l[30].trim():"",u.owner=null!=l[22]?l[22].trim():"",u.strucType=null!=l[23]?l[23].trim():"",u.height=null!=l[24]?l[24].trim():"",u.city=null!=l[7]?l[7].trim():"",u.state=null!=l[9]?l[9].trim():"",u.ZIP=null!=l[10]?l[10].trim():"",u.county=null!=l[11]?l[11].trim():"",u.plusCode=null!=l[29]?l[29].trim():"",u})}ParseDMS(l){var n=l.split(/\s+/);return this.ConvertDMSToDD(n[0],n[1],n[2],n[3])}ConvertDMSToDD(l,n,u,t){var e=Number(l)+Number(n)/60+Number(u)/3600;return"S"!=t&&"W"!=t||(e*=-1),e.toFixed(8)}getHeaderArray(l){let n=l[0].split("\t"),u=[];for(let t=0;t<n.length;t++)u.push(n[t]);return u}}var c=u("IheW"),b=u("4ZJM"),p=u("PSD3"),h=u.n(p);class d{constructor(l,n){this.mapService=l,this.changeDetector=n,this.style="mapbox://styles/mapbox/streets-v11",this.lat=36.149278,this.lng=-109.6824607,this.csvData=[],this.mapView=!0,b.accessToken=s.a.mapbox.accessToken}set content(l){this.mapElement=l}ngOnInit(){h.a.fire({title:"Loading data!",text:"Markers are loading, Please wait...",onOpen:()=>{h.a.showLoading()}}),this.mapService.getCSVData(l=>{l.shift(),this.csvData=l,this.mapView&&this.initMap()})}initMap(){h.a.fire({title:"Loading data!",text:"Markers are loading, Please wait...",onOpen:()=>{h.a.showLoading()}}),this.map=new b.Map({container:this.mapElement.nativeElement,style:this.style,zoom:10,center:[this.lng,this.lat]}),this.map.addControl(new b.NavigationControl),this.addMarkers(this.map)}switchLayer(l){this.map.setStyle("mapbox://styles/mapbox/"+l)}addMarkers(l){this.csvData.forEach((n,u)=>{if(!isNaN(n.lat)&&!isNaN(n.long)){const u=document.createElement("div");u.className="marker",u.style.backgroundImage="url(assets/images/button.png)",u.style.width="16px",u.style.height="16px",new b.Marker(u).setLngLat([n.long,n.lat]).setPopup(new b.Popup({maxWidth:"525px"}).setHTML(`\n              <div>\n                <h3>${n.code} - ${n.owner}</h3>\n                <embed src="http://www.americasrf.com/public_html/NNTRC/Part2Single/`+n.code+'.pdf#toolbar=1" width="500" height="375">\n              </div>\n            ')).addTo(l)}u===this.csvData.length-1&&h.a.close()})}changeView(l){"map"===l?(this.mapView=!0,this.changeDetector.detectChanges(),this.initMap()):"list"===l&&(this.mapView=!1)}}var m=t.ob({encapsulation:0,styles:[['.match-parent[_ngcontent-%COMP%]{width:100%;height:800px}#menu[_ngcontent-%COMP%]{position:absolute;background:#efe9e1;padding:10px;font-family:"Open Sans",sans-serif;z-index:1111}.marker[_ngcontent-%COMP%]{background-size:cover;width:50px;height:50px;border-radius:50%;cursor:pointer}.mapboxgl-popup[_ngcontent-%COMP%]{max-width:525px}.mapboxgl-popup-content[_ngcontent-%COMP%]{width:525px;height:400px;text-align:center;font-family:"Open Sans",sans-serif}.mapboxgl-popup-anchor-top[_ngcontent-%COMP%], .mapboxgl-popup-content-wrapper[_ngcontent-%COMP%]{max-width:525px;max-width:400px}table[_ngcontent-%COMP%]{width:100%;overflow:auto}tbody[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}li[_ngcontent-%COMP%]{cursor:pointer}.active[_ngcontent-%COMP%]{background:#f7f7f7!important}']],data:{}});function g(l){return t.Jb(0,[(l()(),t.qb(0,0,null,null,10,null,null,null,null,null,null,null)),(l()(),t.qb(1,0,null,null,8,"div",[["id","menu"]],null,null,null,null,null)),(l()(),t.Hb(-1,null,[" \xa0 "])),(l()(),t.qb(3,0,null,null,0,"input",[["checked","checked"],["id","streets-v11"],["name","rtoggle"],["type","radio"],["value","streets"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.switchLayer("streets-v11")&&t),t},null,null)),(l()(),t.qb(4,0,null,null,1,"label",[["for","streets"]],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Street"])),(l()(),t.Hb(-1,null,["\xa0 "])),(l()(),t.qb(7,0,null,null,0,"input",[["id","satellite-v9"],["name","rtoggle"],["type","radio"],["value","satellite"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.switchLayer("satellite-v9")&&t),t},null,null)),(l()(),t.qb(8,0,null,null,1,"label",[["for","satellite"]],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Satellite"])),(l()(),t.qb(10,0,[[1,0],["mapElement",1]],null,0,"div",[["class","match-parent"]],null,null,null,null,null))],null,null)}function v(l){return t.Jb(0,[(l()(),t.qb(0,0,null,null,24,"tr",[],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Hb(2,null,["",""])),(l()(),t.qb(3,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Hb(4,null,["",""])),(l()(),t.qb(5,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Hb(6,null,["",""])),(l()(),t.qb(7,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Hb(8,null,["",""])),(l()(),t.qb(9,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Hb(10,null,["",""])),(l()(),t.qb(11,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Hb(12,null,["",""])),(l()(),t.qb(13,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Hb(14,null,["",""])),(l()(),t.qb(15,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Hb(16,null,["",""])),(l()(),t.qb(17,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Hb(18,null,["",""])),(l()(),t.qb(19,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Hb(20,null,["",""])),(l()(),t.qb(21,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Hb(22,null,["",""])),(l()(),t.qb(23,0,null,null,1,"td",[],null,null,null,null,null)),(l()(),t.Hb(24,null,["",""]))],null,function(l,n){l(n,2,0,n.context.$implicit.code),l(n,4,0,n.context.$implicit.lat),l(n,6,0,n.context.$implicit.long),l(n,8,0,n.context.$implicit.elevation),l(n,10,0,n.context.$implicit.owner),l(n,12,0,n.context.$implicit.strucType),l(n,14,0,n.context.$implicit.height),l(n,16,0,n.context.$implicit.city),l(n,18,0,n.context.$implicit.state),l(n,20,0,n.context.$implicit.ZIP),l(n,22,0,n.context.$implicit.county),l(n,24,0,n.context.$implicit.plusCode)})}function w(l){return t.Jb(0,[(l()(),t.qb(0,0,null,null,30,"div",[["class","table-responsive"]],null,null,null,null,null)),(l()(),t.qb(1,0,null,null,29,"table",[["class","table table-striped table-bordered table-responsive"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,25,"thead",[],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,24,"tr",[],null,null,null,null,null)),(l()(),t.qb(4,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Code"])),(l()(),t.qb(6,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Latitude Structure"])),(l()(),t.qb(8,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Longitude Structure"])),(l()(),t.qb(10,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Elevation Structure"])),(l()(),t.qb(12,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Owner Structure"])),(l()(),t.qb(14,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Structure Type"])),(l()(),t.qb(16,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Height"])),(l()(),t.qb(18,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["City"])),(l()(),t.qb(20,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["State"])),(l()(),t.qb(22,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["ZIP"])),(l()(),t.qb(24,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["County"])),(l()(),t.qb(26,0,null,null,1,"th",[],null,null,null,null,null)),(l()(),t.Hb(-1,null,["Plus Code"])),(l()(),t.qb(28,0,null,null,2,"tbody",[],null,null,null,null,null)),(l()(),t.fb(16777216,null,null,1,null,v)),t.pb(30,278528,null,0,i.k,[t.N,t.K,t.r],{ngForOf:[0,"ngForOf"]},null)],function(l,n){l(n,30,0,n.component.csvData)},null)}function f(l){return t.Jb(0,[t.Fb(671088640,1,{content:0}),(l()(),t.qb(1,0,null,null,12,"ul",[["class","nav nav-tabs"]],null,null,null,null,null)),(l()(),t.qb(2,0,null,null,5,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(3,0,null,null,4,"a",[["class","nav-link"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.changeView("map")&&t),t},null,null)),t.Eb(512,null,i.x,i.y,[t.r,t.s,t.k,t.C]),t.pb(5,278528,null,0,i.j,[i.x],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Cb(6,{active:0}),(l()(),t.Hb(-1,null,["Map"])),(l()(),t.qb(8,0,null,null,5,"li",[["class","nav-item"]],null,null,null,null,null)),(l()(),t.qb(9,0,null,null,4,"a",[["class","nav-link"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.changeView("list")&&t),t},null,null)),t.Eb(512,null,i.x,i.y,[t.r,t.s,t.k,t.C]),t.pb(11,278528,null,0,i.j,[i.x],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t.Cb(12,{active:0}),(l()(),t.Hb(-1,null,["List"])),(l()(),t.qb(14,0,null,null,4,"div",[["class","tab-content"]],null,null,null,null,null)),(l()(),t.fb(16777216,null,null,1,null,g)),t.pb(16,16384,null,0,i.l,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(l()(),t.fb(16777216,null,null,1,null,w)),t.pb(18,16384,null,0,i.l,[t.N,t.K],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component,t=l(n,6,0,1==u.mapView);l(n,5,0,"nav-link",t);var e=l(n,12,0,0==u.mapView);l(n,11,0,"nav-link",e),l(n,16,0,u.mapView),l(n,18,0,!u.mapView)},null)}function x(l){return t.Jb(0,[(l()(),t.qb(0,0,null,null,2,"app-structure",[],null,null,null,f,m)),t.Eb(512,null,o,o,[c.c]),t.pb(2,114688,null,0,d,[o,t.h],null,null)],function(l,n){l(n,2,0)},null)}var q=t.mb("app-structure",d,x,{},{},[]),y=u("iInd");class k{}u.d(n,"StructuresModuleNgFactory",function(){return C});var C=t.nb(e,[],function(l){return t.xb([t.yb(512,t.j,t.ab,[[8,[a.a,q]],[3,t.j],t.w]),t.yb(4608,i.n,i.m,[t.t,[2,i.A]]),t.yb(1073742336,i.b,i.b,[]),t.yb(1073742336,y.p,y.p,[[2,y.u],[2,y.l]]),t.yb(1073742336,k,k,[]),t.yb(1073742336,e,e,[]),t.yb(1024,y.j,function(){return[[{path:"",component:d}]]},[])])})}}]);